<!-- Скоро, должен будет содержать инфу о расширениях файлов, на которые можно наткнуться при моддинге Null's Brawl. -->
<sup>v1.0 – написал v1s7, особые благодарности [Daniill-SV](https://github.com/Daniil-SV) и сообществу [SC Workshop](https://discord.gg/spFcna3xFJ)</sup> 

[Switch to English](https://github.com/v1s7/csv-monsters/tree/main/FILETYPES-en.md)

> [!TIP]  
> Содержание этого гайда можно открыть, нажав на кнопку ⋮☰ в правом верхнем углу.

> [!NOTE]  
> Перед началом чтения рекомендуется прочесть [мануал](https://github.com/v1s7/csv-monsters/tree/main/MANUAL.md).

-----
# Введение
Перед прочтением следует прояснить несколько терминов, простых и не очень: 

**Название файла** – его должен иметь любой файл. Высвечивается около каждого файла при открытии папки с ним в файловом менеджере (проводнике). 

**Расширение файла** – это набор символов в названии файла, находящийся после последней точки. Например, у content.json расширение "json". Если в названии файла есть несколько точек, то зачастую расширение берётся после последней. Таким образом, у "content.txt.md.json" всё равно будет расширение "json". У этого правила хоть есть редкие исключения в виде .tar.xz, .zip.001 и прочих, но скорее всего вы с ними никогда не столкнётесь. 

**Сжатие/компрессия** – процесс кодирования данных таким образом, чтобы они занимали меньше пространства в хранилище устройства. Обычно замедляет скорость открытия сжатых файлов. У каждого формата свои сложные методы, объясняться здесь они не будут.

**Архив** – набор из нескольких папок и/или файлов, представленных как один монолитный.

**Текстура** – картинка, накладывающаяся на какой-либо объект.

**MIP-маппинг** (от лат. multum in parvo — «много в малом») – метод текстурирования, использующий несколько копий одной текстуры с разной детализацией. Смысл рендерить текстуру в её полном разрешении 1024х1024, если по итогу на экране устройства она будет занимать 70-80 пикселей из-за своей отдалённости (или из-за низкого разрешения дисплея)? Именно это и решает MIP-маппинг – дублирует текстуры в разных разрешениях, дабы тратить меньше ресурсов графического процессора.

**FlatBuffers** – крутая библиотека от Google, созданная для упрощения оптимизации скорости и потребления оперативной памяти играми и тяжёлыми программами

**Библиотека** – в данном контексте это код, который можно встроить в другой код, чтобы сделать его не только короче, функциональнее и проще, но и чтобы программисты не тратили время на изобретание велосипеда.

[**ScwBot**](https://discord.gg/spFcna3xFJ) – бот в Дискорде, в котором собраны почти все конвертеры форматов для моддинга, есть моментальный поиск/скачивание игровых файлов и множество прочих интересных возмжностей по типу `img2map`. Этот бот – спасение для людей с телефона, так как почти для всех конвертеров требуется компьютер. Но не всё так радужно: благодаря Дискорду все отправляемые файлы ограничены 10 МБ, а также он не постоянно онлайн. 

**Конвертер** – программа, позволяющая правильно заменять форматы файлов.

# Основа
## .glb / .gltf
Если вкратце, то GLB – это версия формата GLTF, данные которого переведены в бинарный формат. В свою очередь glTF – основанный на JSON (далеко не на том, на котором пишутся моды) простой, эффективный и быстро загружаемый формат 3D-текстур с отличным сжатием, прозванный в народе "JPEG-ом в мире 3D". Подробнее: https://simple.wikipedia.org/wiki/GlTF

Используемые в игре GLB-файлы Supercell оптимизируют с помощью FlatBuffers, от чего для открытия GLB в 3D-редакторах (по типу Blender) необходимо сначала преобразовать его в формат без FlatBuffers (например, с помощью [Flat-Converter](https://github.com/Daniil-SV/Supercell-Flat-Converter) или того же ScwBot), а уже при добавлении его в мод – преобразовать его обратно (необязательно, но желательно).

## .scw
Проприетарный формат 3D моделей от Supercell с точно такой же целью использования, как и у GLB, а по своей структуре SCW очень похож уже на DAE, от чего существуют конвертеры этих форматов (например у того же ScwBot). Как формат, SCW уже давным-давно заброшен в угоду GLB, который поддерживает достаточно много расширений, методов сжатий, да и он банально удобнее в использовании, от чего становится ещё и очень гибким.

## .sctx
Проприетарный формат текстур от Supercell, заточенный специально под их движок Titan. Содержит либо спрайт-листы, либо развёртки 3D моделей. Также он обладает такими возможностями, как MIP-маппинг и стриминг текстур.

[SCTX Converter](https://github.com/Daniil-SV/SCTX-Converter) отлично справится со своей задачей, вытащив из одного файла уже два: PNG и JSON. Чтобы конвертировать обратно, понадобятся оба этих файла.

ScwBot также умеет конвертировать через `s! sctx2png`. Только JSON вы получить из него не сможете, от чего при конвертации обратно (`s! png2sctx`) могут потеряться важные данные, и игра может отображать отредактированный файл неправильно. Но это всё ещё лучший вариант для быстрого просмотра текстур.

## .sc
Проприетарный формат текстур Supercell, который может содержать как простые текстуры (если название файла кончается на \_tex.sc), так и 2D анимации. Самый трудный в редактировании и декомпиляции, так как файлы этого типа имеют самые большие размеры, по типу emoji.sc, занимающего целых 64 МБ. 

Формат имеет несколько версий, известные в народе, как v0.5, v1 и v2:
- v0.5 – хранил в себе обычные текстуры в "\_tex.sc"
- v1 – каждая текстура была вынесена в свой отдельный ZKTX
- v2 – SC был переписан, после чего всё стало хранится в одном файле (по сути во всё тех же KTX), а именно внутри FlatBuffers

Стоит уточнить, что как минимум v0.5 и v1.0 были придуманы самими мододелами чисто ради удобства – до 2024 года Supercell использовали подход с тэгами, как у оригинального SWF ещё со времён Adobe Flash. Таким образом, чтобы что-то обновить, им просто нужно было добавить новый тэг, поэтому все эти версии – лишь приблизительный набор тэгов, которые они юзали продолжительное время.
А по поводу v2, так как суперселл активно начали использовать FlatBuffers – под раздачу попал и .sc, таким образом получился SC2. По итогу SC2 – всё тот же старый добрый SC, но который был запихнут во FlatBuffers.

Конвертировать файлы с этим расширением быстрее всего командой `s! sc2png` в канале с ScwBot. Но помните, такой способ ограничен файлами до 10 МБ, а учитывая сжатие от SC, то 5-6 МБ.

Для ознакомления с внутренностями SC-файла можно использовать [SC Editor (тот что на Джаве)](https://github.com/danila-schelkov/sc-editor), в котором можно визуально посмотреть на все содержащиеся в нём ресурсы. Однако SC2 им не поддерживается, и придётся сначала прогнать ск через [ScDowngrade](https://github.com/Daniil-SV/ScDowngrade). А также дополнительно потребуется скачать [KTX Tools](https://github.com/KhronosGroup/KTX-Software) и выставить установщике добавить его в PATH.

Если оба предыдущих расклада вас не устраивают, или же вы хотите более гибкий вариант для редактирования (а именно Adobe Animate), то последним вариантом будет [SC2FLA](https://discord.com/channels/751042695698579457/751056303123857509/1288796520199487532) (FLA – формат проектов в Анимейте). SC2 он также не поддерживает, файл нужно будет сначала деградировать. Для обратного перевода FLA в SC потребуется установить плагин [SupercellSWF-Animate](https://github.com/sc-workshop/SupercellSWF-Animate).

# Дополнительно
## .dae
Один из стандартных форматов для 3D моделей, открывающийся в любом 3D-редакторе. Можно получить при конвертации SCW-файла. Подробнее: https://wikipedia.org/wiki/COLLADA

## .ktx / .zktx
KTX ([Khronos TeXture](https://www.khronos.org/ktx/)) – это эффективный и производительный контейнерный формат для надёжного распространения текстур GPU на различных платформах и в приложениях. Содержимое KTX-файла может варьироваться от простой 2D-текстуры до текстуры массива cubemap с mipmaps. Файлы KTX содержат все параметры, необходимые для эффективной загрузки текстур в 3D-интерфейсы, такие как OpenGL и Vulkan, включая доступ к отдельным уровням MIP-маппинга.
ZKTX – тот же файл KTX, но сжатый с помощью Zstandard.
Оба варианта, начиная с версии игры v58, больше ею не принимаются. Потребуется конвертация либо сначала в PNG и потом в SCTX (например всё тем же ScwBot), либо в SC если редактируете через Adobe Animate.

<!--
## .pvr
[PVR](https://docs.imgtec.com/specifications/pvr-file-format-specification/html/topics/pvr-introduction.html) – это формат контейнера текстур, используемый для хранения текстур в графических приложениях. Существует ещё со времён Sega Dreamcast и ныне используется преимущественно в мобильных играх.

В самой игре вообще не используется.
-->

<!-- # Шейдеры
## .shader

## .fsh

## .vsh

-->
# Звуки
Самый распространённый формат для музыки и эффектов в игровой индустрии – OGG (Vorbis), обходящий MP3 и AAC не только по уровню компресии, но и не имеет проблем, от которых предыдущие два страдают – AAC от закрытости кода и роялти (комиссии за использование), MP3 от задержки воспроизведения при зацикливании в 0,5 секунды (если не применять костыли) и плохой компрессии при большем ущербе эффективности процессора (хоть в наши дни это почти незаметно, в играх важно выдавливать каждый процент производительности из железа игрока).
Также существует формат WAV – аудио вообще без какой-либо компрессии и, соответственно, с огромным размером файла (раз в 30 больше среднестатистического MP3-трека). Его преимущество заключается в максимальной производительности и моментальном запуске на любом железе, поэтому он подойдёт только для многократно повторяющихся звуковых эффектов с длительностью меньше секунды. Применения в Null's Brawl он не имеет, так как OGG всё ещё вполне разумный кандидат для таких целей.
Характеристики всех звуков в Null's Brawl такие:
- Формат: OGG Vorbis
- Частота (дискретизация): 44,1 kHz (44100 Hz)
- Битрейт: 48-80 кбит/с (в среднем 64 кбит/с, в ffmpeg это `-q:a 0`)
- Стерео-звук

Соблюдать этот стандарт желательно, но не обязательно. Null's Brawl будет проигрывать любой формат с любыми характеристиками.

# Шрифты
Среди них есть только 2 основных формата: .ttf и .otf, игрой поддерживаются оба, поэтому за определённым форматом гнаться особо нет смысла. Почитать об их отличиях подробнее можете здесь: https://old.reddit.com/r/typography/comments/ci4nwk/otf_vs_ttf/

# Ликбез
## .png
Формат изображений, имеет сжатие без потерь. Очень гибкий, используется во многих местах. База для любых текстур.

## .json
Обычный текстовый файл, просто с другим расширением. Серьёзно, можно просто создать TXT-файл и позже переименовать его в JSON. Предназначен для использования в нём одноимённого языка разметки. Именно на нём пишутся моды для нулса, майнкрафт бедрок, и многих других игр.

## .zip
ZIP – это самый популярный формат сжатия и архивирования данных без потерь. ZIP-файл содержит один или несколько файлов, которые были соединены вместе с целью уменьшения размера файлов, сохранения исходного качества медиаконтента и/или отправки нескольких файлов в одном. В нашем случае ZIP-архивы используются для соединения файлов мода в один, и далее проходят ручную проверку и подпись.

## .jar / .NullsBrawlAssets
JAR – Java ARchive, грубо говоря ZIP-архив с папкой META-INF внутри. NullsBrawlAssets – это просто JAR-архив с другим расширением. Подробнее об этом рассказывается в [мануале](https://github.com/v1s7/csv-monsters/tree/main/MANUAL.md#NullsBrawlAssets).